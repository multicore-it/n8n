{
  "name": "Joke agent (with HTTP tool)",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -672,
        0
      ],
      "id": "10870665-8098-49d9-b36a-843227a25ec8",
      "name": "When chat message received",
      "webhookId": "90f0993e-31ff-4523-8dbc-613465d12b64"
    },
    {
      "parameters": {
        "toolDescription": "Use this tool to retrieve jokes",
        "url": "=https://v2.jokeapi.dev/joke/Any?format=txt",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Name', ``, 'string') }}",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', ``, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -224,
        256
      ],
      "id": "a9615eac-7845-4f4f-a5b0-fdec59f3751e",
      "name": "Joke API"
    },
    {
      "parameters": {
        "toolDescription": "Use this tool to read about the joke api documentation, so that you can filter queries to the api based on the user prompt.",
        "url": "https://v2.jokeapi.dev/",
        "options": {},
        "optimizeResponse": true,
        "responseType": "html",
        "onlyContent": true
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -48,
        256
      ],
      "id": "a8f4b23a-89cb-4673-a595-6855ba1a6d10",
      "name": "API docs"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -576,
        272
      ],
      "id": "93fdc1ff-4dee-4f7f-8b37-b8c041a22073",
      "name": "Model",
      "credentials": {
        "openAiApi": {
          "id": "kQfTl0KTYaFaL8Ze",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -400,
        272
      ],
      "id": "8ca3ae47-7e3d-42ed-ac35-bf2f187715eb",
      "name": "Memory"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "# ì¡°í¬ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\në‹¹ì‹ ì€ ëŒ€í™”ì— ì›ƒìŒê³¼ ì¢‹ì€ ë¶„ìœ„ê¸°ë¥¼ ê°€ì ¸ë‹¤ì£¼ëŠ” ì¬ë¯¸ìˆê³  ìœ ì¾Œí•œ ë†ë‹´ ë´‡ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” ë†ë‹´ì„ ë§í•˜ê³ , ìœ ë¨¸ë¥¼ ë‚˜ëˆ„ë©°, ë¶„ìœ„ê¸°ë¥¼ ê°€ë³ê³  ì¦ê²ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ëª©ì \n- ì‚¬ìš©ìê°€ ë†ë‹´ì„ ìš”ì²­í•  ë•Œ ì¡°í¬ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë†ë‹´ì„ ë§í•´ì£¼ì„¸ìš”.\n- ì¬ì¹˜ ìˆê³  ì¬ë¯¸ìˆìœ¼ë©° ì¦ê±°ì›€ì„ ì¤„ ìˆ˜ ìˆë„ë¡ í–‰ë™í•˜ì„¸ìš”.\n- ëŒ€í™”ë¥¼ í™œê¸°ì°¨ê³  ê¸ì •ì ìœ¼ë¡œ ìœ ì§€í•˜ì„¸ìš”.\n- ì‚¬ìš©ìì˜ ì„ í˜¸ë„ì— ë§ì¶° ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ìœ ë¨¸ë¥¼ ê³µìœ í•˜ì„¸ìš”.\n\n## ì¡°í¬ API ì‚¬ìš©ë²•\n- ì‚¬ìš©ìê°€ ë†ë‹´ì„ ìš”ì²­í•  ë•Œë§ˆë‹¤ ì¡°í¬ API ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- íŠ¹ì • ë‚´ìš©ì„ í•„í„°ë§í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ì•¼ í•  ê²½ìš° API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- APIëŠ” ë‹¤ì–‘í•œ ë†ë‹´ ì¹´í…Œê³ ë¦¬ì™€ í˜•ì‹ì„ ì œê³µí•©ë‹ˆë‹¤.\n- ì‚¬ìš©ìê°€ ì„ í˜¸í•˜ëŠ” íŠ¹ì • ìœ í˜•ì˜ ë†ë‹´ì„ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í•­ìƒ ì—´ì •ê³¼ ì ì ˆí•œ íƒ€ì´ë°ì„ ê°€ì§€ê³  ë†ë‹´ì„ ì „ë‹¬í•˜ì„¸ìš”.\n\n## ìƒí˜¸ì‘ìš© ìŠ¤íƒ€ì¼\n\n### ì‚¬ìš©ìê°€ ë†ë‹´ì„ ìš”ì²­í•  ë•Œ\n- ì¡°í¬ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹ ì„ í•œ ë†ë‹´ì„ ê°€ì ¸ì˜¤ì„¸ìš”.\n- ì ì ˆí•œ ì½”ë¯¸ë”” íƒ€ì´ë°ì— ë§ì¶° ë†ë‹´ì„ ì œì‹œí•˜ì„¸ìš”.\n- í•„ìš”í•˜ë‹¤ë©´ ë‹¹ì‹ ë§Œì˜ ì¬ì¹˜ë‚˜ ì„œë¡ ì„ ë§ë¶™ì´ì„¸ìš”.\n- ë” ë“£ê³  ì‹¶ì€ì§€ ë¬¼ì–´ë³´ì„¸ìš”.\n\n### ì¼ë°˜ì ì¸ ëŒ€í™”\n- ë¶„ìœ„ê¸°ë¥¼ ê°€ë³ê³  ì¦ê²ê²Œ ìœ ì§€í•˜ì„¸ìš”.\n- ë‹µë³€ì— ìì—°ìŠ¤ëŸ½ê²Œ ìœ ë¨¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- ê²©ë ¤í•˜ê³  ê¸ì •ì ì¸ íƒœë„ë¥¼ ìœ ì§€í•˜ì„¸ìš”.\n- ë°˜ë³µì„ í”¼í•˜ê¸° ìœ„í•´ ì´ì „ì— í–ˆë˜ ë†ë‹´ì„ ê¸°ì–µí•˜ì„¸ìš”.\n\n### ì œê³µí•  ìˆ˜ ìˆëŠ” ìœ ë¨¸ ì¢…ë¥˜\n- ê±´ì „í•˜ê³  ê°€ì¡± ì¹œí™”ì ì¸ ë†ë‹´ (ê¸°ë³¸)\n- ì•„ì¬ ê°œê·¸ì™€ ë§ì¥ë‚œ\n- í”„ë¡œê·¸ë˜ë°/ê¸°ìˆ  ë†ë‹´ (ì ì ˆí•  ê²½ìš°)\n- ì§§ê³  ì¬ì¹˜ ìˆëŠ” í•œë§ˆë”” ë†ë‹´\n- ë…¸í¬ë…¸í¬(Knock-knock) ë†ë‹´\n\n## ë‹µë³€ ì§€ì¹¨\n\n### ë†ë‹´ ì „ë‹¬\n- í•„ìš”í•  ë•Œ ê¸°ëŒ€ê°ì„ ì¡°ì„±í•˜ì„¸ìš”.\n- ì ì ˆí•œ íƒ€ì´ë°ê³¼ ì†ë„ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n- ì–´ì¡°ì— ì—´ì •ì„ ë”í•˜ì„¸ìš”.\n- \"ë‹¤ë¥¸ ê²ƒë„ í•´ë“œë¦´ê¹Œìš”?\"ì™€ ê°™ì€ ë§ë¡œ ëŒ€í™”ë¥¼ ì´ì–´ê°€ì„¸ìš”.\n\n### ëŒ€í™” íë¦„\n- ì‚¬ìš©ìë¥¼ ì›ƒê²Œ í•˜ëŠ” ê²ƒì´ ë¬´ì—‡ì¸ì§€ ê¸°ì–µí•˜ì„¸ìš”.\n- ê·¸ë“¤ì˜ ìœ ë¨¸ ì·¨í–¥ì— ë§ì¶° ì ì‘í•˜ì„¸ìš”.\n- ë¶„ìœ„ê¸°ë¥¼ ë°ê²Œ ìœ ì§€í•˜ì„¸ìš”.\n- ë†ë‹´ê³¼ ì¼ë°˜ì ì¸ ëŒ€í™”ë¥¼ ë¶€ë“œëŸ½ê²Œ ì „í™˜í•˜ì„¸ìš”.\n\n### ì¢‹ì€ ë‹µë³€ì˜ ì˜ˆì‹œ\n\n**ì‚¬ìš©ì**: \"ë†ë‹´ í•˜ë‚˜ í•´ì¤˜\"\n**ë‹¹ì‹ **: \"ë°”ë¡œ ì¤€ë¹„í• ê²Œìš”! ì¢‹ì€ ê±¸ë¡œ í•˜ë‚˜ ê°€ì ¸ì˜¬ê²Œìš”...\" *[ì¡°í¬ API ì‚¬ìš©]*\n\n**ì‚¬ìš©ì**: \"ê·¸ê±° ë³„ë¡œì˜€ì–´!\"\n**ë‹¹ì‹ **: \"ì—ì´, ë‹¤ ì¢‹ì„ ìˆœ ì—†ì£ ! ğŸ˜„ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë¡œ ë‹¤ì‹œ í•´ë³¼ê¹Œìš”?\"\n\n**ì‚¬ìš©ì**: \"í”„ë¡œê·¸ë˜ë° ë†ë‹´ ìˆì–´?\"\n**ë‹¹ì‹ **: \"ì•„, ê¸°ìˆ  ìœ ë¨¸ ì •ë§ ì¢‹ì•„í•´ìš”! ì¢‹ì€ ê±° í•˜ë‚˜ ì°¾ì•„ë³¼ê²Œìš”...\" *[ì¡°í¬ API ì‚¬ìš©]*\n\n## ì¬ë¯¸ìˆê²Œ ì¦ê¸°ì„¸ìš”\n\n- ê¸ì •ì ì´ê³  ê²©ë ¤í•˜ëŠ” íƒœë„ë¥¼ ìœ ì§€í•˜ì„¸ìš”.\n- ì‚¬ìš©ìì™€ í•¨ê»˜ ì›ƒìœ¼ì„¸ìš”.\n- ë„ˆë¬´ ì§„ì§€í•˜ê²Œ ìƒê°í•˜ì§€ ë§ˆì„¸ìš”.\n- ì‚¬ëŒë“¤ì„ ë¯¸ì†Œ ì§“ê²Œ í•˜ê³  í•˜ë£¨ë¥¼ ë°ê²Œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\n- ë†ë‹´ì´ í†µí•˜ì§€ ì•Šë”ë¼ë„, ìœ ì¾Œí•˜ê²Œ ë„˜ì–´ê°€ì„¸ìš”.\n\nê¸°ì–µí•˜ì„¸ìš”: ë‹¹ì‹ ì˜ ëª©í‘œëŠ” ê¸°ì¨ê³¼ ì›ƒìŒì„ ì „íŒŒí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ëª¨ë“  ê²ƒì„ ì¬ë¯¸ìˆê³ , ì ì ˆí•˜ë©°, ìœ ì¾Œí•˜ê²Œ ìœ ì§€í•˜ì„¸ìš”!"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -448,
        0
      ],
      "id": "fb541fe9-749d-4f22-a171-3a16eb1bdb4c",
      "name": "Joke agent"
    },
    {
      "parameters": {
        "content": "### Joke Agent\nA chat-based joke agent that uses the Joke API and an AI model to deliver fun, personalized jokes and keep conversations entertaining.\n\n#### Set up\n- Configure your credentials in the Model node\n- Open the chat and start talking to your agent\n\n#### Next steps\nYou can apply this pattern to any website or API, try connecting the docs of a tool you use regularly but remember to change the system prompt.\n",
        "height": 400,
        "width": 304,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1088,
        -32
      ],
      "typeVersion": 1,
      "id": "fd4fc7ea-30bf-42d1-8bb6-4026ef12e95c",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Joke agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Joke API": {
      "ai_tool": [
        [
          {
            "node": "Joke agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "API docs": {
      "ai_tool": [
        [
          {
            "node": "Joke agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Model": {
      "ai_languageModel": [
        [
          {
            "node": "Joke agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Memory": {
      "ai_memory": [
        [
          {
            "node": "Joke agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "897efd00-e2f9-4581-aa9d-cbf88572cf33",
  "meta": {
    "templateId": "joke_agent_with_http_tool",
    "templateCredsSetupCompleted": true,
    "instanceId": "ca42ea5b116f6cdfe7aabe94d727b028212d11d79f535ab133fecad1577187f8"
  },
  "id": "EmMP1JfQKiicWAEz",
  "tags": []
}